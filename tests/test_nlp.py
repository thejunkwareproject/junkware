#!/usr/bin/env python
# -*- coding: utf-8 -*-

import unittest

from _helpers import TestHelpers
helpers = TestHelpers()
helpers.add_relative_path()

from lib.nlp import NLP

text = ('''
    The titular threat of The Blob has always struck me as the ultimate movie
    monster: an insatiably hungry, amoeba-like mass able to penetrate
    virtually any safeguard, capable of--as a doomed doctor chillingly
    describes it--"assimilating flesh on contact.
    Snide comparisons to gelatin be damned, it's a concept with the most
    devastating of potential consequences, not unlike the grey goo scenario
    proposed by technological theorists fearful of
    artificial intelligence run rampant.
    This article is about practitioners of the scholarly pursuit of antiquarianism.  For the trade in old books, see Bookselling.  For trading or collecting old objects, see Antique.Ole Worm's cabinet of curiosities, from Museum Wormianum, 1655.An antiquarian or antiquary (from the Latin antiquarius, meaning pertaining to ancient times) is an aficionado or student of antiquities or things of the past. More specifically, the term is used for those who study history with particular attention to ancient artifacts, archaeological and historic sites, or historic archives and manuscripts. The essence of antiquarianism is a focus on the empirical evidence of the past, and is perhaps best encapsulated in the motto adopted by the 18th-century antiquary, Sir Richard Colt Hoare, "We speak from facts not theory".Today the term is often used in a pejorative sense, to refer to an excessively narrow focus on factual historical trivia, to the exclusion of a sense of historical context or process.HistoryAntiquarianism in ancient ChinaSee also: History of Chinese archaeologyDuring the Song Dynasty (960–1279), the scholar Ouyang Xiu (1007–1072) analyzed alleged ancient artifacts bearing archaic inscriptions in bronze and stone, which he preserved in a collection of some 400 rubbings; Patricia Ebrey writes that he pioneered early ideas in epigraphy.The Kaogutu (考古圖) or "Illustrated Catalogue of Examined Antiquity" (preface dated 1092) compiled by Lü Dalin (呂大臨) (1046–1092) is one of the oldest known catalogues to systematically describe and classify ancient artifacts which were unearthed. Another catalogue was the Chong xiu Xuanhe bogutu (重修宣和博古圖) or "Revised Illustrated Catalogue of Xuanhe Profoundly Learned Antiquity" (compiled from 1111 to 1125), commissioned by Emperor Huizong of Song (r. 1100 – 1125), and also featured illustrations of some 840 vessels and rubbings.Interests in antiquarian studies of ancient inscriptions and artifacts waned after the Song Dynasty, but were revived by early Qing Dynasty (1644–1912) scholars such as Gu Yanwu (1613–1682) and Yan Ruoju (1636–1704).Antiquarianism in ancient RomeIn ancient Rome, a strong sense of traditionalism motivated an interest in studying and recording the "monuments" of the past; the Augustan historian Livy uses the Latin monumenta in the sense of "antiquarian matters." Books on antiquarian topics covered such subjects as the origin of customs, religious rituals, and political institutions; genealogy; topography and landmarks; and etymology. Annals and histories might also include sections pertaining to these subjects, but annals are chronological in structure, and Roman histories, such as those of Livy and Tacitus, are both chronological and offer an overarching narrative and interpretation of events. By contrast, antiquarian works as a literary form are organized by topic, and any narrative is short and illustrative, in the form of anecdotes.Major antiquarian Latin writers with surviving works include Varro, Pliny the Elder, Aulus Gellius, and Macrobius. The Roman emperor Claudius published antiquarian works, none of which is extant. Some of Cicero's treatises, particularly his work on divination, show strong antiquarian interests, but their primary purpose is the exploration of philosophical questions. Roman-era Greek writers also dealt with antiquarian material, such as Plutarch in his Roman Questions and the Deipnosophistae of Athenaeus. The aim of Latin antiquarian works is to collect a great number of possible explanations, with less emphasis on arriving at a truth than in compiling the evidence. The antiquarians are often used as sources by the ancient historians, and many antiquarian writers are known only through these citations.Medieval and early modern antiquarianismDespite the importance of antiquarian writing in the literature of ancient Rome, some scholars view antiquarianism as emerging only in the Middle Ages (see History of archaeology). Medieval antiquarians sometimes made collections of inscriptions or records of monuments, but the Varro-inspired concept of antiquitates among the Romans as the "systematic collections of all the relics of the past" faded. Antiquarianism's wider flowering is more generally associated with the Renaissance, and with the critical assessment and questioning of classical texts undertaken in that period by humanist scholars. Textual criticism soon broadened into an awareness of the supplementary perspectives on the past which could be offered by the study of coins, inscriptions and other archaeological remains, as well as documents from medieval periods. Antiquaries often formed collections of these and other objects; cabinet of curiosities is a general term for early collections, which often encompassed antiquities and more recent art, items of natural history, memorabilia and items from far-away lands.William Camden (1551–1623), author of the Britannia, wearing the tabard and chain of office of Clarenceux King of Arms. Originally published in the 1695 edition of Britannia.The importance placed on lineage in early modern Europe meant that antiquarianism was often closely associated with genealogy, and a number of prominent antiquaries (including Robert Glover, William Camden, William Dugdale and Elias Ashmole) held office as professional heralds. The development of genealogy as a "scientific" discipline (i.e. one that rejected unsubstantiated legends, and demanded high standards of proof for its claims) went hand-in-hand with the development of antiquarianism. Genealogical antiquaries recognised the evidential value for their researches of non-textual sources, including seals and church monuments.Many early modern antiquaries were also chorographers: that is to say, they recorded landscapes and monuments within regional or national descriptions. In England, some of the most important of these took the form of county histories.In the context of the 17th-century scientific revolution, and more specifically that of the "Quarrel of the Ancients and the Moderns" in England and France, the antiquaries were firmly on the side of the "Moderns". They increasingly argued that empirical primary evidence could be used to refine and challenge the received interpretations of history handed down from literary authorities.19th–21st centuriesBy the end of the 19th century, antiquarianism had diverged into a number of more specialized academic disciplines including archaeology, art history, numismatics, sigillography, philology, literary studies and diplomatics. Antiquaries had always attracted a degree of ridicule (see below), and since the mid-19th century the term has tended to be used most commonly in negative or derogatory contexts. Nevertheless, many practising antiquaries continue to claim the title with pride. In recent years, in a scholarly environment in which interdisciplinarity is increasingly encouraged, many of the established antiquarian societies (see below) have found new roles as facilitators for collaboration between specialists.Terminological distinctionsAntiquaries and antiquarians"Antiquary" was the usual term in English from the 16th to the mid-18th centuries to describe a person interested in antiquities (the word "antiquarian" being generally found only in an adjectival sense). From the second half of the 18th century, however, "antiquarian" began to be used more widely as a noun, and today both forms are equally acceptable.Antiquaries and historiansFrom the 16th to the 19th centuries, a clear distinction was perceived to exist between the interests and activities of the antiquary and the historian. The antiquary was concerned with the relics of the past (whether documents, artefacts or monuments), whereas the historian was concerned with the narrative of the past, and its political or moral lessons for the present. The skills of the antiquary tended to be those of the critical examination and interrogation of his sources, whereas those of the historian were those of the philosophical and literary reinterpretation of received narratives. Francis Bacon in 1605 described readings of the past based on antiquities (which he defined as "Monuments, Names, Wordes, Proverbes, Traditions, Private Recordes, and Evidences, Fragments of stories, Passages of Bookes, that concerne not storie, and the like") as "unperfect Histories". Such distinctions began to be eroded in the second half of the 19th century as the school of empirical source-based history championed by Leopold von Ranke began to find widespread acceptance, and today's historians employ the full range of techniques pioneered by the early antiquaries. Rosemary Sweet suggests that 18th-century antiquaries"probably had more in common with the professional historian of the twenty-first century, in terms of methodology, approach to sources and the struggle to reconcile erudition with style, than did the authors of the grand narratives of national history".Antiquarians, antiquarian books and antiquesIn many European languages, the word antiquarian (or its equivalent) has shifted in modern times to refer to a person who either trades in or collects rare and ancient antiquarian books; or who trades in or collects antique objects more generally. In English, however, the word (either as antiquarian or antiquary) very rarely carries this sense. An antiquarian is primarily a student of ancient books, documents, artefacts or monuments. Many antiquarians have also built up extensive personal collections in order to inform their studies, but a far greater number have not; and conversely many collectors of books or antiques would not regard themselves (or be regarded) as antiquarians.The Puzzle (1756): etching by John Bowles. In one variation on a recurrent joke, four antiquaries struggle to decipher what seems to be an ancient inscription, but which is in fact a crude memorial to Claud Coster, tripe-seller, and his wife. The print is ironically dedicated to "the Penetrating Genius's of Oxford, Cambridge, Eaton, Westminster, and the Learned Society of Antiquarians".Pejorative associationsAntiquaries often appeared to possess an unwholesome interest in death, decay, and the unfashionable; while their focus on obscure and arcane details meant that they seemed to lack an awareness both of the realities and practicalities of modern life, and of the wider currents of history. For all these reasons they frequently became objects of ridicule. The antiquary was satirised in John Earle's Micro-cosmographie of 1628 ("Hee is one that hath that unnaturall disease to bee enamour'd of old age, and wrinkles, and loves all things (as Dutchmen doe Cheese) the better for being mouldy and worme-eaten"), in Jean-Siméon Chardin's painting "Le Singe Antiquaire" (c.1726), in Sir Walter Scott's novel The Antiquary (1816), in the caricatures of Thomas Rowlandson, and in many other places. The New Dictionary of the Terms Ancient and Modern of the Canting Crew of c.1698 defines an antiquary as "A curious critic in old Coins, Stones and Inscriptions, in Worm-eaten Records and ancient Manuscripts, also one that affects and blindly dotes, on Relics, Ruins, old Customs Phrases and Fashions". In his "Epigrams," John Donne wrote of The Antiquary: "If in his study he hath so much care To hang all old strange things Let his wife beware." The word's resonances were close to those of modern terms for individuals with obsessive interests in technical minutiae, such as nerd, trainspotter or anorak.Thomas Rowlandson's caricature, Death and the Antiquaries, 1816. A group of antiquaries cluster eagerly around the exhumed corpse of a king, oblivious to the jealous figure of Death aiming his dart at one of them. The image was inspired by the opening of the tomb of Edward I in Westminster Abbey by the Society of Antiquaries in 1774.The connoisseur Horace Walpole, who shared many of the antiquaries' interests, was nonetheless emphatic in his insistence that the study of cultural relics should be selective and informed by taste and aesthetics. He deplored the more comprehensive and eclectic approach of the Society of Antiquaries, and their interest in the primitive past. In 1778 he wrote:“The antiquaries will be as ridiculous as they used to be; and since it is impossible to infuse taste into them, they will be as dry and dull as their predecessors. One may revive what perished, but it will perish again, if more life is not breathed into it than it enjoyed originally. Facts, dates and names will never please the multitude, unless there is some style and manner to recommend them, and unless some novelty is struck out from their appearance. The best merit of the Society lies in their prints; for their volumes, no mortal will ever touch them but an antiquary. Their Saxon and Danish discoveries are not worth more than monuments of the Hottentots; and for Roman remains in Britain, they are upon a foot with what ideas we should get of Inigo Jones, if somebody was to publish views of huts and houses that our officers run up at Senegal and Goree. Bishop Lyttelton used to torment me with barrows and Roman camps, and I would as soon have attended to the turf graves in our churchyards. I have no curiosity to know how awkward and clumsy men have been in the dawn of arts or in their decay.”In his essay "On the Uses and Abuses of History for Life" from his Untimely Meditations, philosopher Friedrich Nietzsche examines three forms of history. One of these is "antiquarian history", an objectivising historicism which forges little or no creative connection between past and present. Nietzsche's philosophy of history had a significant impact on critical history in the 20th century.C.R. Cheney, writing in 1956, observed that "[a]t the present day we have reached such a pass that the word 'antiquary' is not always held in high esteem, while 'antiquarianism' is almost a term of abuse". Arnaldo Momigliano in 1990 defined an antiquarian as "the type of man who is interested in historical facts without being interested in history". Professional historians still often use the term "antiquarian" in a pejorative sense, to refer to historical studies which seem concerned only to place on record trivial or inconsequential facts, and which fail to consider the wider implications of these, or to formulate any kind of argument. The term is also sometimes applied to the activities of amateur historians such as historical reenactors, who may have a meticulous approach to reconstructing the costumes or material culture of past eras, but who are perceived to lack much understanding of the cultural values and historical contexts of the periods in question.Antiquarian societiesA College (or Society) of Antiquaries was founded in London in c.1586, to debate matters of antiquarian interest. Members included William Camden, Sir Robert Cotton, John Stow, William Lambarde, Richard Carew and others. This body existed till 1604, when it fell under suspicion of being political in its aims, and was abolished by King James I. Papers read at their meetings are preserved in Cotton's collections, and were printed by Thomas Hearne in 1720 under the title A Collection of Curious Discourses, a second edition appearing in 1771.The entrance to the premises of the Society of Antiquaries of London, at Burlington House, Piccadilly.In 1707 a number of English antiquaries began to hold regular meetings for the discussion of their hobby and in 1717 the Society of Antiquaries was formally reconstituted, finally receiving a charter from King George II in 1751. In 1780 King George III granted the society apartments in Somerset House, and in 1874 it moved into its present accommodation in Burlington House. The society was governed by a council of twenty and a president who is ex officio a trustee of the British Museum.The Society of Antiquaries of Scotland was founded in 1780 and had the management of a large national antiquarian museum in Edinburgh.The Society of Antiquaries of Newcastle upon Tyne, the oldest provincial antiquarian society in England, was founded in 1813.In Ireland a society was founded in 1849 called the Kilkenny Archaeological Society, holding its meetings at Kilkenny. In 1869 its name was changed to the Royal Historical and Archaeological Association of Ireland, and in 1890 to the Royal Society of Antiquaries of Ireland, its office being transferred to Dublin.In France the Société des Antiquaires de France was formed in 1813 by the reconstruction of the Acadêmie Celtique, which had existed since 1804.The American Antiquarian Society was founded in 1812, with its headquarters at Worcester, Massachusetts. It had a library of upwards of 100,000 volumes and its transactions have been published bi-annually since 1820.In Denmark, the Kongelige Nordiske Oldskriftselskab (also known as La Société Royale des Antiquaires du Nord or the Royal Society of Northern Antiquaries) was founded at Copenhagen in 1825.In Germany the Gesamtverein der Deutschen Geschichts und Altertumsvereine was founded in 1852.Notable antiquariansPatrick AbercrombyArthur AgardePasquale AmatiGiovanni AnastasiElias AshmoleJohn AubreyAbd-al Latif al-BaghdadiSir James BalfourThomas BakerJohn BaleDaines BarringtonThomas BatemanJohn BattelyMa'ad al-Mustansir BillahWilliam BorlaseWilliam BraggeThomas BrowneGeorge BuckWilliam CamdenRobert CrowleyAbraham de la PrymeSir William DugdaleRev. Dr. Henry DuncanJohn FoxeRichard GraftonIbn Abd-el-HakemAnthony Charles HarrisRobert Stephen HawkerSir Richard Colt HoareMuhammad al-IdrisiMontague Rhodes JamesMaurice JohnsonNasir KhusrawAl-KindiAlexander Crawford LambWilliam LambardeJohn LelandEdward LhuydH. P. LovecraftWilliam Collings LukisHerman H. J. LyngeDaniel LysonsSamuel LysonsDubhaltach MacFhirbhisighAl-MaqriziDhul-Nun al-MisriPhilip NormanPeregrine O'DuignanRuaidhri O FlaithbheartaighElias OwenNicolas-Claude Fabri de PeirescDorning RasbothamFranklin Pierce RiceFred RosenstockJoaquín Rubio y MuñozShen Kuo (Chinese surname comes before given name)William Forbes SkeneJacques SeligmannSir Hans SloaneJohn StowWilliam StukeleyRalph ThoresbyRobert Thoroton, namesake of Nottinghamshire's Thoroton SocietyAhmad ibn TulunGeorge VertueIbn WahshiyyaHorace WalpoleOlaus WormiusThomas WrightSee alsoHistorianCollectorConnoisseurEpigraphySigillographyNomenclatureTypology (archaeology)Renaissance humanismEnglish county historiesAuxiliary sciences of historyThe Antiquary by Sir Walter ScottReferences This article incorporates text from a publication now in the public domain: Chisholm, Hugh, ed. (1911). Encyclopædia Britannica (11th ed.). Cambridge University Press. BibliographyBroadway, Jan (2006). "No Historie So Meete": gentry culture and the development of local history in Elizabethan and early Stuart England. Manchester: Manchester University Press. ISBN 978-0-7190-7294-9. Brown, I.G. (1980). The Hobby-Horsical Antiquary: a Scottish character, 1640–1830. Edinburgh: National Library of Scotland. ISBN 0-902220-38-1. Fox (ed.), Levi (1956). English Historical Scholarship in the Sixteenth and Seventeenth Centuries. London: Dugdale Society and Oxford University Press. Gransden, Antonia (1980). "Antiquarian Studies in Fifteenth-Century England". Antiquaries Journal 60: 75–97. doi:10.1017/S0003581500035988. Kendrick, T.D. (1950). British Antiquity. London. Levine, J.M. (1987). Humanism and History: origins of modern English historiography. Ithaca, NY. Levine, J.M. (1991). The Battle of the Books: history and literature in the Augustan age. Ithaca, NY. Levine, Philippa (1986). The Amateur and the Professional: antiquarians, historians and archaeologists in Victorian England, 1838–1886. Cambridge: Cambridge University Press. ISBN 0-521-30635-3. Mendyk, S.A.E. (1989). "Speculum Britanniae": regional study, antiquarianism and science in Britain to 1700. Toronto. Miller, Peter N. (2000). Peiresc’s Europe: learning and virtue in the seventeenth century. New Haven: Yale University Press. ISBN 0-300-08252-5. Momigliano, Arnaldo (1950). "Ancient History and the Antiquarian". Journal of the Warburg and Courtauld Institutes 13 (3/4): 285–315. doi:10.2307/750215. Momigliano, Arnaldo (1990). "The Rise of Antiquarian Research"". The Classical Foundations of Modern Historiography. Berkeley: University of California Press. pp. 54–79. ISBN 0520068904. Parry, Graham (1995). The Trophies of Time: English antiquarians of the seventeenth century. Oxford: Oxford University Press. ISBN 0198129629. Pearce (ed.), Susan (2007). Visions of Antiquity: The Society of Antiquaries of London 1707-2007. London. Piggott, Stuart (1976). Ruins in a Landscape: essays in antiquarianism. Edinburgh. Stenhouse, William (2005). Reading Inscriptions and Writing Ancient History: historical scholarship in the late Renaissance. London: Institute of Classical Studies, University of London School of Advanced Study. ISBN 0-900587-98-9. Sweet, Rosemary (2004). Antiquaries: the discovery of the past in eighteenth-century Britain. London: Hambledon & London. ISBN 1-85285-309-3. Vine, Angus (2010). In Defiance of Time: antiquarian writing in early modern England. Oxford: Oxford University Press. ISBN 978-0-19-956619-8. Weiss, Roberto (1988). The Renaissance Discovery of Classical Antiquity (2nd ed.). Oxford. Woolf, D.R. (1987). "Erudition and the Idea of History in Renaissance England". Renaissance Quarterly 40: 11–48. doi:10.2307/2861833. Woolf, Daniel (2003). The Social Circulation of the Past: English historical culture, 1500–1730. Oxford: Oxford University Press. ISBN 0-19-925778-7. 

''').decode("utf-8")


class NLPTest(unittest.TestCase):

    def setUp(self):
        self.nlp = NLP(text)

    def test_sentences(self):
        # print len(self.nlp.sentences)
        self.assertTrue(len(self.nlp.sentences) == 160)


    def test_get_clean_text(self):
        text=self.nlp.get_clean_text()
        print text.decode("utf-8")

        self.assertTrue(False)

'''
    def test_filter_out(self):
        text=self.nlp.filter_out_nastyness()
        print text
        self.assertTrue(False)

    def test_keywords(self):
        keywords = self.nlp.keywords()
        print len(keywords)
        self.assertTrue(len(keywords) == 24)

    def test_words(self):
        words = self.nlp.words()
        print len(words)
        self.assertTrue(len(words) == 72)

    def test_count_words(self):
        c = self.nlp.count_words()
        self.assertTrue(type(c) == dict)

    def test_adjectives(self):
        adj = self.nlp.get_adjectives()
        print type(adj[0])
        self.assertTrue(len(adj) == 15)
        self.assertTrue(type(adj[0]) == str)

    def test_verbs(self):
        verbs = self.nlp.get_verbs()
        print verbs
        self.assertTrue(len(verbs) == 4)
        self.assertTrue(type(verbs[0]) == str)

    def test_nouns(self):
        nouns = self.nlp.get_nouns()
        print len(nouns)
        self.assertTrue(len(nouns) == 12)
        self.assertTrue(type(nouns[0]) == str)

    def test_noun_phrases(self):
        noun_phrases = self.nlp.get_noun_phrases()
        print len(noun_phrases)
        self.assertTrue(len(noun_phrases) == 9)

    def test_get_language(self):
        lg = self.nlp.get_language()
        self.assertTrue(lg == "en")

    def test_sentiment(self):
        sentiments = self.nlp.analyze_sentiment()
        self.assertTrue(len(sentiments) == 2)
        for sent in sentiments:
            self.assertIsNotNone(sent["polarity"])
            self.assertTrue(type(sent["polarity"]) == float)
            self.assertIsNotNone(sent["subjectivity"])
            self.assertTrue(type(sent["subjectivity"]) == float)

    def test_translation(self):
        zh_txt = self.nlp.translate_to('zh')
        print zh_txt
        self.assertTrue(zh_txt.detect_language() == "zh-CN")

'''
if __name__ == '__main__':
    unittest.main()
